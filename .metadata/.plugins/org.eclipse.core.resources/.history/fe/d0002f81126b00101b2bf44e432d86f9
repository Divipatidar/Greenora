package com.cdac.service;

import org.modelmapper.ModelMapper;
import org.springframework.stereotype.Service;

import com.cdac.custom_exception.ResourseNotFoundException;
import com.cdac.dao.AddressDao;
import com.cdac.dto.AddressDto;
import com.cdac.entities.Address;

import jakarta.transaction.Transactional;
import lombok.AllArgsConstructor;

@Service
@Transactional
@AllArgsConstructor
public class AddressServiceImpl implements AddressService {
	private final ModelMapper modalmapper;
	private final AddressDao addressdao;
	

	

	@Override
	public Address addAddress(AddressDto dto) {
		Address address = modalmapper.map(dto, Address.class);
		return addressdao.save(address);
		
	}

	@Override
	public Address updateAddress(Long addressId, AddressDto dto) {
		Address address = addressdao.findById(addressId).orElseThrow(()->
		new ResourseNotFoundException("invalid address id!"));
		
		modalmapper.map(dto, address);
		return address;
	}

	@Override
	public void deleteAddress(Long addressId) {
		Address address = addressdao.findById(addressId).orElseThrow(()->
		new ResourseNotFoundException("invalid address id!"));
		
		addressdao.delete(address);
	}

}
